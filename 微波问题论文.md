**数据预处理和部分符号说明：**
$k$ :单天线的五种配置方式，取值为0，1，2，3，4，分别代表该天线:关闭，位移0$\degree$,90$\degree$,180$\degree$,270$\degree$;
$\vec{e_i}$ ：单个天线在区域中某点产生的信号矢量；
$w_i$ :单个天线在区域中某点产生的功率强度；
$\vec{E_i}$ :32个天线在区域内某点叠加后的矢量；
$\vec{|E_i|}$ :32个天线在区域内某点叠加后的矢量大小；
$\varphi_{ik}$ :单个天线在区域内某点的配置方式下相位大小，k在此处不等于0；
$Gv(Value-goat)$ :目标点功率值；
$Iv(Value-interference)$ :干扰点功率值；
$K$:旁瓣功率大小，即除了目标点功率之外其余点中功率最大的值；
$D$:凹坑的功率大小，即全局最大最小值之差；
$C$:波束关闭的数量；
$Ov(Value-object)$ :单个个体的适应值；
$W = 20*log_{10}{|E|}$:功率和信号强度的转化公式
$LogMag$表格中所有$inf$和$nan$处理为0；
$Phase$表格中所有$inf$和$nan$处理为0；


**第一部分--单点功率计算模型：**
首先，我们要根据所给数据功率叠加计算方法计算出某点的功率。
考虑天线阵列在半球面上产生的功率状况，将半球面展开成平面，在欧几里得平面几何中进行运算，因为题目给的数据为隔$5\degree$取一点，所以采用单点叠加代表一个$5\degree*5\degree$的区域面积功率大小。
对于单个天线$u_i$，其在水平$(-180,180)$和垂直$(-90,90)$某点产生的功率$w_i$大小为：
$$w_i = 20*log_{10}{|e_i|}$$

考虑对于单点矢量信号$E_i$,将其信号强度投影到x轴和y轴上，则
$$\vec{e_{ix}} = \vec{e_{i}}*cos(\varphi_{ik})$$

$$\vec{e_{iy}} = \vec{e_{i}}*sin(\varphi_{ik})$$

对于单个天线区域内单点的合信号$\vec{E_{i}}$，其计算公式如下：
$$\vec{E_{i}}=\sum_{\mathclap{1\le i \le 32}} \vec{e_{i}}$$

对于单个天线区域内单点的合信号的模$|E_i|$，由矢量的计算公式，得出：
$$|\vec {E_{ix}}| = \sum_{\mathclap{1\le i \le 32}} |\vec {e_{ix}}|$$

$$|\vec {E_{iy}}| = \sum_{\mathclap{1\le i \le 32}} |\vec {e_{iy}}|$$

$$|\vec {E_i}| = \sqrt{|\vec {E_{ix}}|^{2}+|\vec {E_{iy}}|^{2}}$$
最后，我们得出所有天线在区域内单点处的功率$W_i$：
$$W_i = 20*log_{10}{|E_i|}$$

**第二部分--遗传算法构建：**
$(1)$设定初始数据：
种群大小S，繁殖代数$N$,染色体长度$l$为32，每一个碱基$k_i$有五种，分别代表第$i$个天线的五种相位配置方式，交叉概率$Pc$，变异概率$Pm$：
$$x = \begin{bmatrix}
k_1 & k_2 & \ldots & k_{32}
\end{bmatrix},k_i =  0,1,2,3,4$$

$$S = \begin{bmatrix} x_1 &x _2 & \ldots & x_{n}\end{bmatrix}^{\text{T}}$$

$(2)$计算单个个体的适应值$Ov$：
不同的问题有不同的适应值计算公式，根据适应值表示该个体在整个种群中的竞争地位；

$(3)$选择阶段：
采用轮盘赌法，选出新的S个优势个体；

$(4)$交叉阶段：
采用单点交叉的交叉算子，对染色体部分碱基进行大范围交换；

$(5)$变异阶段：
采用单点变异，对染色体单个碱基进行更改操作；

$(6)$重复$(2)$~$(5)N$次，输出最优的染色体编码，并将其转化为波束的矢量配置方式；
**第三部分--波束配置方式效用评价模型**
为了代入遗传算法中的适应值函数，起到评价单个个体在种群中的竞争地位，我们选用单个个体波束配置方式的效用模型作为其适应度的参考值，模型的构建如下：
$$Ov = \underbrace{\frac{\large1}{\large 1+\large e^{-(Gv-a)*b}}}_{\text{Ov-weight}}*\underbrace{c*\large e^{(\large\frac{d-Iv}{f})}}_{\text{Iv-weight}}*\underbrace{{K}^{-μ}}_{\text{K-weight}}$$

其中$a,b,c,d,f,μ$分别是该模型中$Gv$和$Iv$可以调整的权重参数，在问题的求解中可以通过调整达到较优化的结果。
该模型由三部分组成：
第一部分是目标点功率值，即$Ov$的权重，我们采用$sigmol$函数来配比，其目的是为了筛选出题目硬性要求的目标点功率值在35dbm以上的个体，使得他们在种群中的竞争优势大大增加；
第二部分则是干扰点的功率值，即$Iv$的权重，我们采用指数函数，因为其快速增长特性可以帮助我们在同等$Gv$条件下扩大较小$Iv$的优势；
第三部分是旁瓣的大小，即除了目标（10$\degree$,5$\degree$）之外其余坐标中最大的点的功率值，我们给其分配一个负幂指数，使得其越小对于整体的函数值贡献却越大。

**第四部分--区域覆盖效用评价模型**
同理，为了量化遗传算法的适应值函数，我们再次构建模型，考虑区域每个配置方式下对指定区域的平均功率、凹坑和天线关闭个数进行量化计算。
水平$(-30\degree,+30\degree)$，竖直$(-15\degree,+15\degree)$区域共91个点的平均合成功率$M$为：
$$M = \frac {\sum{W_i}} {91}$$

凹坑$D$的计算公式为：
$$D = Max(W_i)-Min(W_j)$$

则可以得出适应度的计算方法为：
$$Ov = \underbrace{\large e^{-\frac {D}{a}}}_{\text{D-weight}}*\underbrace{(C+σ)}_{\text{C-weight}}* \underbrace{\frac {1}{1+e^{-(M-d)*f}}}_{\text{M-weight}}$$

其中$a,σ,c,d,f$分别是该模型中凹坑、关闭波束数量、区域平均功率强度的权重参数。
模型的构建分为三部分：
第一部分是凹坑的权重配置，我们用指数函数来最小化凹坑的值；
第二部分是关闭天线个数的权重，在这种情况下采用线性的函数来调整其权重，使得其值的变化有影响但是不是特别重要；
第三部分也是采用$sigmol$函数来配重，再次利用了其优良的徒增特性，起到很好的筛选作用。

**第五部分--问题1.1求解**
$(1)$选取适应值函数为--波束配置方式效用评价模型：
将可调整参数a = 35.5, b = 15,c = 20, d = 20, e = 10，μ = 1带入其中：
$$Ov = \underbrace{\frac{\large1}{\large 1+\large e^{-(Gv-35.5)*15}}}_{\text{Ov-weight}}*\underbrace{20*\large e^{(\large\frac{20-Iv}{10})}}_{\text{Iv-weight}}*\underbrace{{K}^{-μ}}_{\text{K-weight}}$$

$(2)$经过遗传算法程序求解，得出波束最优矢量配置方式为：
$$x = \begin{bmatrix}xxxxxx\end{bmatrix}$$
随着迭代的次数增加，可以观察到其慢慢收敛于一稳定值：
(插入图片)
根据波束矢量配置方式，画出合成功率的等高线图“
(插入图片)
**第六部分--问题1.2求解**
$(1)$选取适应值函数--区域覆盖效用评价模型：
$$Ov = \underbrace{\large e^{-\frac {D}{10}}}_{\text{D-weight}}*\underbrace{(C+1)}_{\text{C-weight}}* \underbrace{\frac {1}{1+e^{-(M-35.5)*20}}}_{\text{M-weight}}$$
其中a = 10,σ = 1,d = 35.5, f = 20;
$(2)$经过遗传算法程序求解，得出波束最优矢量配置方式为：
$$x = \begin{bmatrix}xxxxxx\end{bmatrix}$$
随着迭代的次数增加，可以观察到其慢慢收敛于一稳定值：
(插入图片)
根据波束矢量配置方式，画出合成功率的等高线图
(插入图片)

不过很可惜，平均功率没有达到35dbm的要求。
**第七部分--模型评价**
不足之处：
$(1)$：遗传算法的交叉步骤，采用的是单点交叉，所以在遗传的过程中有可能会丢失当前的优势碱基序列；
$(2)$：波束配置方式效用评价模型和区域覆盖效用评价模型的构建还不完美，导致遗传算法的收敛速度不够快，同时有可能陷入局部最优解；