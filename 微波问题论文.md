**数据预处理和部分符号说明：**
$k$ :单天线的五种配置方式，取值为0，1，2，3，4，分别代表该天线:关闭，位移0$\degree$,90$\degree$,180$\degree$,270$\degree$;
$\vec{e_i}$ ：单个天线在区域中某点产生的信号矢量；
$w_i$ :单个天线在区域中某点产生的功率强度；
$\vec{E_i}$ :32个天线在区域内某点叠加后的矢量；
$\vec{|E_i|}$ :32个天线在区域内某点叠加后的矢量强度；
$\varphi_{ik}$ :单个天线在区域内某点的配置方式下相位大小，k在此处不等于0；
$Gv(Value-goat)$ :目标点功率值；
$Iv(Value-interference)$ :干扰点功率值；
$Ov(Value-object)$ :单个个体的适应值；
$W = 20*log_{10}{|E|}$:功率和信号强度的转化公式
$LogMag$表格中所有$inf$和$nan$处理为0；
$Phase$表格中所有$inf$和$nan$处理为0；


**第一部分--单点功率计算：**
首先，我们要根据所给数据功率叠加计算方法计算出某点的功率。
对于单个天线$u_i$，其在水平$-180\leqslant i\leqslant +180$和垂直$-90\leqslant i\leqslant +90$某点产生的功率$w_i$为：
$$w_i = 20*log_{10}{|e_i|}$$

考虑对于单点矢量信号$E_i$,将其信号强度投影到x轴和y轴上，则
$$\vec{e_{ix}} = \vec{e_{i}}*cos(\varphi_{ik})$$

$$\vec{e_{iy}} = \vec{e_{i}}*sin(\varphi_{ik})$$

对于单个天线区域内单点的合信号$\vec{E_{i}}$，其计算公式如下：
$$\vec{E_{i}}=\sum_{\mathclap{1\le i \le 32}} \vec{e_{i}}$$

对于单个天线区域内单点的合信号的模$|E_i|$，由矢量的计算公式，得出：
$$|\vec {E_{ix}}| = \sum_{\mathclap{1\le i \le 32}} |\vec {e_{ix}}|$$

$$|\vec {E_{iy}}| = \sum_{\mathclap{1\le i \le 32}} |\vec {e_{iy}}|$$

$$|\vec {E_i}| = \sqrt{|\vec {E_{ix}}|^{2}+|\vec {E_{iy}}|^{2}}$$
最后，我们得出所有天线在区域内单点处的功率$W_i$：
$$W_i = 20*log_{10}{|E_i|}$$

**第二部分--遗传算法构建：**
$$\underbrace{a+b+c}_{\text{note}}$$
$(1)$设定初始数据：
种群大小S为100，繁殖代数$N$,染色体长度$l$为32，每一个碱基$k_i$有五种，分别代表第$i$个天线的五种配置方式，交叉概率$Pc$，变异概率$Pm$：
$$x = \begin{bmatrix}
k_1 & k_2 & \ldots & k_{32}
\end{bmatrix},k_i =  0,1,2,3,4$$

$$Pc = 0.75$$

$$Pm = 0.1$$

$$S = \begin{bmatrix} x_1 &x _2 & \ldots & x_{100}\end{bmatrix}^{\text{T}}$$

$$N = 100000$$

$(2)$计算单个个体的适应值$Ov$：
不同的问题有不同的适应值计算公式，根据适应值表示该个体在整个种群中的竞争地位；

$(3)$选择阶段：
采用轮盘赌法，选出新的100个优势个体；

$(4)$交叉阶段：
采用单点交叉的交叉算子，对染色体部分碱基进行大范围交换；

$(5)$变异阶段：
采用单点变异，对染色体单个碱基进行更改操作；

$(6)$重复$(2)$~$(5)N$次，输出最优的染色体编码，并将其转化为波束的矢量配置方式；
**第三部分--问题1.1求解**
$(1)$选取适应值函数为
$$Ov = \underbrace{\frac{\large1}{\large 1+\large e^{-(Gv-35.5)*15}}}_{\text{Ov-weight}}*\underbrace{20*\large e^{(\large\frac{20-Iv}{10})}}_{\text{Iv-weight}}$$

其中$Gv$为$W(10\degree,5\degree)$的功率大小，$Iv$为$W(10\degree,10\degree)$的功率大小，因为$sigmol$函数的优良徒增特性，我们可以很好的筛选出比合成功率35要高的个体。

$(2)$经过遗传算法程序求解，得出波束最优矢量配置方式为：
$$x = \begin{bmatrix}xxxxxx\end{bmatrix}$$
随着迭代的次数增加，可以观察到其慢慢收敛于一稳定值：
(插入图片)
根据波束矢量配置方式，画出合成功率的等高线图“
(插入图片)
**第四部分--问题1.2求解**
$(1)$选取适应值函数：
水平$(-30\degree,+30\degree)$，竖直$(-15\degree,+15\degree)$区域共91个点的平均合成功率$M$为：
$$M = \frac {\sum{W_i}} {91}$$

凹坑$D$的计算公式为：
$$D = Max(W_i)-Min(W_j)$$

则可以得出适应度的计算方法为：
$$Ov = \underbrace{\large e^{-\frac {D}{10}}}_{\text{D-weight}}*\underbrace{(C+1)}_{\text{C-weight}}* \underbrace{\frac {1}{1+e^{-(M-35.5)*20}}}_{\text{M-weight}}$$
这里再次运用了$sigmol$函数的优越徒增特性。
$(2)$经过遗传算法程序求解，得出波束最优矢量配置方式为：
$$x = \begin{bmatrix}xxxxxx\end{bmatrix}$$
随着迭代的次数增加，可以观察到其慢慢收敛于一稳定值：
(插入图片)
根据波束矢量配置方式，画出合成功率的等高线图
(插入图片)
不过很可惜，平均功率没有达到35dbm的要求。